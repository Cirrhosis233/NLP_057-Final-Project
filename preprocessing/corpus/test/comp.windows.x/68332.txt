hi i studi book unix desktop guid open look . 
there exampl winprop.c demonstr program wmprotocol properti chapter 8 . 
it run show static text messag notic popup . 
what problem ? 
thank advanc help ! ! 1 iop file winprop.c show set properti window . 
includ x11xatom.h for definit xaatom includ x11intrinsic.h includ x11stringdefs.h includ xolopenlook.h includ xolstatictext.h includ xoloblongbutt.h includ xolnotice.h this file defin atom ol prefix id top-level noticeshel widget static widget toplevel noticeshel static widget makenotic static char messag client use properti communic window manag . 
this exampl illustr open look applic request notif window manag certain event occur . 
the communic form clientmessag event applic process event-handl atom use inter-cli communic atom atomwmprotocol atomwmdeletewindow atomwmsaveyourself static void handlewmmessag static void saveandexit static void saveyourself static void popnotic static void doexit string hold comand line use respond wmsaveyourself protocol messag . 
char savedcmdline128 void mainargc argv int argc char argv widget w int save command-lin use respond wmsaveyourself protocol messag . 
sprintfsavedcmdlin argv0 ifargc 1 fori 1 argc strcatsavedcmdlin argvi strcatsavedcmdlin creat initi top-level widget toplevel olinitializeargv0 olmain null 0 argc argv creat statictext widget w xtvacreatemanagedwidgetstext statictextwidgetclass toplevel xtnstring messag xtnwidth 200 null creat noticeshel widget later use makenoticetoplevel intern atom atomwmprotocol xinternatomxtdisplayw wmprotocol fals atomwmdeletewindow xinternatomxtdisplayw wmdeletewindow fals atomwmsaveyourself xinternatomxtdisplayw wmsaveyourself fals add event-handl process clientmessag event sent window manag xtaddeventhandlertoplevel noeventmask true handlewmmessag null realiz widget start process event xtrealizewidgettoplevel append properti wmdeletewindow wmsaveyourself definit wmprotocol properti . 
this step requir window id top-level widget . 
the window id valid widget realiz . 
xchangepropertyxtdisplaytoplevel xtwindowtoplevel atomwmprotocol xaatom 32 propmodeappend atomwmdeletewindow 1 xchangepropertyxtdisplaytoplevel xtwindowtoplevel atomwmprotocol xaatom 32 propmodeappend atomwmsaveyourself 1 xtmainloop static void handlewmmessagesw clientdata pevent widget w xtpointer clientdata xevent pevent ifpevent-typ clientmessag pevent-xclient.messagetyp atomwmprotocol ifpevent-xclient.data.l0 atomwmdeletewindow saveandexit ifpevent-xclient.data.l0 atomwmsaveyourself saveyourself static void saveandexit display notic give user chanc respond popnoticetoplevel noticeshel static void saveyourself set wmcommand properti save command-lin . 
xchangepropertyxtdisplaytoplevel xtwindowtoplevel xawmcommand xastr 8 propmodereplac savedcmdlin strlensavedcmdlin 1 static widget makenoticepar widget parent widget w ntext ncontrol nexit ncancel creat button provid callback pop notic w xtvacreatemanagedwidgetquitbutton oblongbuttonwidgetclass parent xtnlabel exit .. 
null xtaddcallbackw xtnselect popnotic null creat noticeshel widget . 
note use xtvacreatepopupshel instead usual xtvacreatemanagedwidget . 
noticeshel xtvacreatepopupshellquitnotic noticeshellwidgetclass w null get id text control area widget noticeshel . 
xtvagetvaluesnoticeshel xtntextarea ntext xtncontrolarea ncontrol null place messag text area noticeshel xtvasetvaluesntext xtnstring pleas confirm exit program null add button control area noticeshel . 
each button appropri callback . 
nexit xtvacreatemanagedwidgetnoticeexit oblongbuttonwidgetclass ncontrol xtnlabel exit null xtaddcallbacknexit xtnselect doexit null ncancel xtvacreatemanagedwidgetnoticecancel oblongbuttonwidgetclass ncontrol xtnlabel cancel xtndefault true null return w static void popnoticeweman wnotic widget weman wnotic xtvasetvalueswnotic xtnemanatewidget weman null pop noticeshel widget . 
the noticeshel widget make sure aplic wait user select one button noticeshel 's control area . 
xtpopupwnotic xtgrabexclus static void doexitw calldata clientdata widget w xtpointer calldata clientdata xclosedisplayxtdisplayw exit0 
